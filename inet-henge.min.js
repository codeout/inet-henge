/*! For license information please see inet-henge.min.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("cola"));else if("function"==typeof define&&define.amd)define(["d3","cola"],e);else{var r="object"==typeof exports?e(require("d3"),require("cola")):e(t.d3,t.cola);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(function(t,e){return(()=>{var r={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},12:t=>{var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var s=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(e.charAt(s>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,s=0;n<t.length;s=++n%4)0!=s&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<2*s|e.indexOf(t.charAt(n))>>>6-2*s);return r}},t.exports=r},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},465:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Boolean]",a="[object Date]",c="[object Function]",h="[object GeneratorFunction]",u="[object Map]",l="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",y="[object String]",v="[object Symbol]",m="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",$="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",S=/\w*$/,M=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,I={};I[i]=I["[object Array]"]=I[b]=I[x]=I[o]=I[a]=I[_]=I[w]=I[k]=I[$]=I[j]=I[u]=I[l]=I[d]=I[f]=I[g]=I[y]=I[v]=I[O]=I[T]=I[C]=I[A]=!0,I["[object Error]"]=I[c]=I[m]=!1;var B="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,E="object"==typeof self&&self&&self.Object===Object&&self,L=B||E||Function("return this")(),z=e&&!e.nodeType&&e,D=z&&t&&!t.nodeType&&t,N=D&&D.exports===z;function F(t,e){return t.set(e[0],e[1]),t}function W(t,e){return t.add(e),t}function H(t,e,r,n){var s=-1,i=t?t.length:0;for(n&&i&&(r=t[++s]);++s<i;)r=e(r,t[s],s,t);return r}function U(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function R(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function V(t,e){return function(r){return t(e(r))}}function q(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var K,X=Array.prototype,Y=Function.prototype,J=Object.prototype,Q=L["__core-js_shared__"],Z=(K=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",G=Y.toString,tt=J.hasOwnProperty,et=J.toString,rt=RegExp("^"+G.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=N?L.Buffer:void 0,st=L.Symbol,it=L.Uint8Array,ot=V(Object.getPrototypeOf,Object),at=Object.create,ct=J.propertyIsEnumerable,ht=X.splice,ut=Object.getOwnPropertySymbols,lt=nt?nt.isBuffer:void 0,dt=V(Object.keys,Object),pt=Lt(L,"DataView"),ft=Lt(L,"Map"),gt=Lt(L,"Promise"),yt=Lt(L,"Set"),vt=Lt(L,"WeakMap"),mt=Lt(Object,"create"),bt=Wt(pt),xt=Wt(ft),_t=Wt(gt),wt=Wt(yt),kt=Wt(vt),$t=st?st.prototype:void 0,jt=$t?$t.valueOf:void 0;function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){this.__data__=new Tt(t)}function St(t,e,r){var n=t[e];tt.call(t,e)&&Ht(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Mt(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return-1}function Pt(t,e,r,n,s,p,m){var M;if(n&&(M=p?n(t,s,p,m):n(t)),void 0!==M)return M;if(!Kt(t))return t;var P=Ut(t);if(P){if(M=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,M)}else{var B=Dt(t),E=B==c||B==h;if(Vt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(B==d||B==i||E&&!p){if(U(t))return p?t:{};if(M=function(t){return"function"!=typeof t.constructor||Ft(t)?{}:Kt(e=ot(t))?at(e):{};var e}(E?{}:t),!e)return function(t,e){return Bt(t,zt(t),e)}(t,function(t,e){return t&&Bt(e,Xt(e),t)}(M,t))}else{if(!I[B])return p?t:{};M=function(t,e,r,n){var s,i=t.constructor;switch(e){case b:return It(t);case o:case a:return new i(+t);case x:return function(t,e){var r=e?It(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case _:case w:case k:case $:case j:case O:case T:case C:case A:return function(t,e){var r=e?It(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case u:return function(t,e,r){return H(e?r(R(t),!0):R(t),F,new t.constructor)}(t,n,r);case l:case y:return new i(t);case f:return function(t){var e=new t.constructor(t.source,S.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,r){return H(e?r(q(t),!0):q(t),W,new t.constructor)}(t,n,r);case v:return s=t,jt?Object(jt.call(s)):{}}}(t,B,Pt,e)}}m||(m=new At);var L=m.get(t);if(L)return L;if(m.set(t,M),!P)var z=r?function(t){return function(t,e,r){var n=e(t);return Ut(t)?n:function(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}(n,r(t))}(t,Xt,zt)}(t):Xt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r););}(z||t,(function(s,i){z&&(s=t[i=s]),St(M,i,Pt(s,e,r,n,i,t,m))})),M}function It(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Bt(t,e,r,n){r||(r={});for(var s=-1,i=e.length;++s<i;){var o=e[s],a=n?n(r[o],t[o],o,r,t):void 0;St(r,o,void 0===a?t[o]:a)}return r}function Et(t,e){var r,n,s=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?s["string"==typeof e?"string":"hash"]:s.map}function Lt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Kt(t)||(e=t,Z&&Z in e))&&(qt(t)||U(t)?rt:M).test(Wt(t));var e}(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=mt?mt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===n?void 0:r}return tt.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:tt.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?n:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Mt(e,t);return!(r<0||(r==e.length-1?e.pop():ht.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Mt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Mt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Mt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new Ot,map:new(ft||Tt),string:new Ot}},Ct.prototype.delete=function(t){return Et(this,t).delete(t)},Ct.prototype.get=function(t){return Et(this,t).get(t)},Ct.prototype.has=function(t){return Et(this,t).has(t)},Ct.prototype.set=function(t,e){return Et(this,t).set(t,e),this},At.prototype.clear=function(){this.__data__=new Tt},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!ft||n.length<199)return n.push([t,e]),this;r=this.__data__=new Ct(n)}return r.set(t,e),this};var zt=ut?V(ut,Object):function(){return[]},Dt=function(t){return et.call(t)};function Nt(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||P.test(t))&&t>-1&&t%1==0&&t<e}function Ft(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||J)}function Wt(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ht(t,e){return t===e||t!=t&&e!=e}(pt&&Dt(new pt(new ArrayBuffer(1)))!=x||ft&&Dt(new ft)!=u||gt&&Dt(gt.resolve())!=p||yt&&Dt(new yt)!=g||vt&&Dt(new vt)!=m)&&(Dt=function(t){var e=et.call(t),r=e==d?t.constructor:void 0,n=r?Wt(r):void 0;if(n)switch(n){case bt:return x;case xt:return u;case _t:return p;case wt:return g;case kt:return m}return e});var Ut=Array.isArray;function Rt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!qt(t)}var Vt=lt||function(){return!1};function qt(t){var e=Kt(t)?et.call(t):"";return e==c||e==h}function Kt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Xt(t){return Rt(t)?function(t,e){var r=Ut(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Rt(t)}(t)&&tt.call(t,"callee")&&(!ct.call(t,"callee")||et.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,s=!!n;for(var o in t)!e&&!tt.call(t,o)||s&&("length"==o||Nt(o,n))||r.push(o);return r}(t):function(t){if(!Ft(t))return dt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Pt(t,!0,!0)}},568:(t,e,r)=>{var n,s,i,o,a;n=r(12),s=r(487).utf8,i=r(738),o=r(487).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?o.stringToBytes(t):s.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),c=8*t.length,h=1732584193,u=-271733879,l=-1732584194,d=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var f=a._ff,g=a._gg,y=a._hh,v=a._ii;for(p=0;p<r.length;p+=16){var m=h,b=u,x=l,_=d;h=f(h,u,l,d,r[p+0],7,-680876936),d=f(d,h,u,l,r[p+1],12,-389564586),l=f(l,d,h,u,r[p+2],17,606105819),u=f(u,l,d,h,r[p+3],22,-1044525330),h=f(h,u,l,d,r[p+4],7,-176418897),d=f(d,h,u,l,r[p+5],12,1200080426),l=f(l,d,h,u,r[p+6],17,-1473231341),u=f(u,l,d,h,r[p+7],22,-45705983),h=f(h,u,l,d,r[p+8],7,1770035416),d=f(d,h,u,l,r[p+9],12,-1958414417),l=f(l,d,h,u,r[p+10],17,-42063),u=f(u,l,d,h,r[p+11],22,-1990404162),h=f(h,u,l,d,r[p+12],7,1804603682),d=f(d,h,u,l,r[p+13],12,-40341101),l=f(l,d,h,u,r[p+14],17,-1502002290),h=g(h,u=f(u,l,d,h,r[p+15],22,1236535329),l,d,r[p+1],5,-165796510),d=g(d,h,u,l,r[p+6],9,-1069501632),l=g(l,d,h,u,r[p+11],14,643717713),u=g(u,l,d,h,r[p+0],20,-373897302),h=g(h,u,l,d,r[p+5],5,-701558691),d=g(d,h,u,l,r[p+10],9,38016083),l=g(l,d,h,u,r[p+15],14,-660478335),u=g(u,l,d,h,r[p+4],20,-405537848),h=g(h,u,l,d,r[p+9],5,568446438),d=g(d,h,u,l,r[p+14],9,-1019803690),l=g(l,d,h,u,r[p+3],14,-187363961),u=g(u,l,d,h,r[p+8],20,1163531501),h=g(h,u,l,d,r[p+13],5,-1444681467),d=g(d,h,u,l,r[p+2],9,-51403784),l=g(l,d,h,u,r[p+7],14,1735328473),h=y(h,u=g(u,l,d,h,r[p+12],20,-1926607734),l,d,r[p+5],4,-378558),d=y(d,h,u,l,r[p+8],11,-2022574463),l=y(l,d,h,u,r[p+11],16,1839030562),u=y(u,l,d,h,r[p+14],23,-35309556),h=y(h,u,l,d,r[p+1],4,-1530992060),d=y(d,h,u,l,r[p+4],11,1272893353),l=y(l,d,h,u,r[p+7],16,-155497632),u=y(u,l,d,h,r[p+10],23,-1094730640),h=y(h,u,l,d,r[p+13],4,681279174),d=y(d,h,u,l,r[p+0],11,-358537222),l=y(l,d,h,u,r[p+3],16,-722521979),u=y(u,l,d,h,r[p+6],23,76029189),h=y(h,u,l,d,r[p+9],4,-640364487),d=y(d,h,u,l,r[p+12],11,-421815835),l=y(l,d,h,u,r[p+15],16,530742520),h=v(h,u=y(u,l,d,h,r[p+2],23,-995338651),l,d,r[p+0],6,-198630844),d=v(d,h,u,l,r[p+7],10,1126891415),l=v(l,d,h,u,r[p+14],15,-1416354905),u=v(u,l,d,h,r[p+5],21,-57434055),h=v(h,u,l,d,r[p+12],6,1700485571),d=v(d,h,u,l,r[p+3],10,-1894986606),l=v(l,d,h,u,r[p+10],15,-1051523),u=v(u,l,d,h,r[p+1],21,-2054922799),h=v(h,u,l,d,r[p+8],6,1873313359),d=v(d,h,u,l,r[p+15],10,-30611744),l=v(l,d,h,u,r[p+6],15,-1560198380),u=v(u,l,d,h,r[p+13],21,1309151649),h=v(h,u,l,d,r[p+4],6,-145523070),d=v(d,h,u,l,r[p+11],10,-1120210379),l=v(l,d,h,u,r[p+2],15,718787259),u=v(u,l,d,h,r[p+9],21,-343485551),h=h+m>>>0,u=u+b>>>0,l=l+x>>>0,d=d+_>>>0}return n.endian([h,u,l,d])})._ff=function(t,e,r,n,s,i,o){var a=t+(e&r|~e&n)+(s>>>0)+o;return(a<<i|a>>>32-i)+e},a._gg=function(t,e,r,n,s,i,o){var a=t+(e&n|r&~n)+(s>>>0)+o;return(a<<i|a>>>32-i)+e},a._hh=function(t,e,r,n,s,i,o){var a=t+(e^r^n)+(s>>>0)+o;return(a<<i|a>>>32-i)+e},a._ii=function(t,e,r,n,s,i,o){var a=t+(r^(e|~n))+(s>>>0)+o;return(a<<i|a>>>32-i)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(a(t,e));return e&&e.asBytes?r:e&&e.asString?o.bytesToString(r):n.bytesToHex(r)}},582:()=>{function t(t,e,r){void 0===r&&(r=1),function(t,e,r,n){var s=function(t,e){var r={},n=function(t,e){void 0===r[t]&&(r[t]={}),r[t][e]={}};return t.forEach((function(t){var r=e.getSourceIndex(t),s=e.getTargetIndex(t);n(r,s),n(s,r)})),r}(t,n);t.forEach((function(t){var r=s[n.getSourceIndex(t)],i=s[n.getTargetIndex(t)];n.setLength(t,1+e*function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:1-function(t,e){var r=0;for(var n in t)void 0!==e[n]&&++r;return r}(t,e)/function(t,e){var r={};for(var n in t)r[n]={};for(var n in e)r[n]={};return Object.keys(r).length}(t,e)}(r,i))}))}(t,r,0,e)}cola.Layout.prototype.jaccardLinkLengths=function(e,r){var n=this;return void 0===r&&(r=1),this.linkDistance((function(t){return e*t.length})),this._linkLengthCalculator=function(){return t(n._links,n.linkAccessor,r)},this}},529:t=>{"use strict";t.exports=e},990:e=>{"use strict";e.exports=t}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return r[t](i,i.exports,s),i.loaded=!0,i.exports}s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};return(()=>{"use strict";s.r(i),s.d(i,{Diagram:()=>S}),s(582);var t=s(990);function e(t){return t.replace(" ","-").toLowerCase()}class r{constructor(t,e){this.name=t,this.color=e}transform(){return`translate(${this.bounds.x}, ${this.bounds.y})`}groupWidth(){return this.bounds.width()}groupHeight(){return this.bounds.height()}static divide(t,e,r){const n={},s=(t,e,s)=>{const i=`${s}:${t}`;n[i]=n[i]||new u(t,r),n[i].push(e)};return t.forEach((t=>{let r=null;e&&(r=t.name.match(e),r&&s(r[1]||r[0],t)),t.group.forEach((e=>s(e,t,String(r))))})),this.array(n)}static array(t){return Object.keys(t).map((e=>t[e]))}static render(t,r){const n=t.selectAll(".group").data(r).enter().append("g").attr("class",(t=>`group ${e(t.name)}`)).attr("transform",(t=>t.transform()));return n.append("rect").attr("rx",8).attr("ry",8).attr("width",(t=>t.groupWidth())).attr("height",(t=>t.groupHeight())).style("fill",((t,e)=>t.color(e))),n.append("text").text((t=>t.name)),n}static tick(t){t.attr("transform",(t=>t.transform())),t.selectAll("rect").attr("width",(t=>t.groupWidth())).attr("height",(t=>t.groupHeight()))}static setPosition(t,e){t.attr("transform",((t,r)=>(t.bounds.x=e[r].x,t.bounds.y=e[r].y,t.transform()))),t.selectAll("rect").attr("width",((t,r)=>e[r].width)).attr("height",((t,r)=>e[r].height))}}const n=t=>class extends t{constructor(t,e){super(t,e),this.leaves=[]}push(t){this.leaves.push(t.id)}},o=e=>class extends e{constructor(e,r){super(e,r),this.dispatch=t.dispatch("rendered")}static render(t,e){const r=super.render(t,e);return r.each((function(t){t.dispatch.rendered(this)})),r}on(t,e){this.dispatch.on(t,e)}},a=t=>{class e extends t{constructor(t,r){super(t,r);for(const n of e.pluginConstructors)n.bind(this)(t,r)}static registerConstructor(t){e.pluginConstructors.push(t)}}return e.pluginConstructors=[],e};class c extends(n(r)){}class h extends(o(c)){}class u extends(a(h)){}class l{constructor(t,e){this.data=t,this.extraKey=e}get(t){return this.slice(t).filter((t=>"string"==typeof t.value))}slice(t){return this.data?this.extraKey?this.sliceWithExtraKey(t):this.sliceWithoutExtraKey(t):[]}sliceWithExtraKey(t){const e=[];return t.forEach((t=>{this.data[t]&&this.data[t][this.extraKey]&&e.push({class:t,value:this.data[t][this.extraKey]})})),e}sliceWithoutExtraKey(t){const e=[];return t.forEach((t=>{this.data[t]&&e.push({class:t,value:this.data[t]})})),e}}class d{constructor(t,e,r,n,s){this.id=e,this.color=n,this.tooltip=s,this.name=t.name,this.group="string"==typeof t.group?[t.group]:t.group||[],this.icon=t.icon,this.metaList=new l(t.meta).get(r),this.meta=t.meta,this.extraClass=t.class||"",this.width=60,this.height=40,this.padding=3,this.tspanOffset="1.1em",this.register(e,t.name)}register(t,e){y.all=y.all||{},y.all[e]=t}transform(){return`translate(${this.x-this.width/2+this.padding}, ${this.y-this.height/2+this.padding})`}nodeWidth(){return this.width-2*this.padding}nodeHeight(){return this.height-2*this.padding}xForText(){return this.width/2}yForText(){return this.height/2}static idByName(t){if(void 0===y.all[t])throw`Unknown node "${t}"`;return y.all[t]}static render(t,r){const n=t.selectAll(".node").data(r).enter().append("g").attr("id",(t=>e(t.name))).attr("name",(t=>t.name)).attr("transform",(t=>t.transform()));return n.each((function(t){t.icon?y.appendImage(this):y.appendRect(this),y.appendText(this)})),n}static appendText(e){const r=t.select(e).append("text").attr("text-anchor","middle").attr("x",(t=>t.xForText())).attr("y",(t=>t.yForText()));r.append("tspan").text((t=>t.name)).attr("x",(t=>t.xForText())),r.each((t=>{t.tooltip||y.appendTspans(r,t.metaList)}))}static appendTspans(t,e){e.forEach((e=>{t.append("tspan").attr("x",(t=>t.xForText())).attr("dy",(t=>t.tspanOffset)).attr("class",e.class).text(e.value)}))}static appendImage(r){t.select(r).attr("class",(t=>`node image ${e(t.name)} ${t.extraClass}`)).append("image").attr("xlink:href",(t=>t.icon)).attr("width",(t=>t.nodeWidth())).attr("height",(t=>t.nodeHeight()))}static appendRect(r){t.select(r).attr("class",(t=>`node rect ${e(t.name)} ${t.extraClass}`)).append("rect").attr("width",(t=>t.nodeWidth())).attr("height",(t=>t.nodeHeight())).attr("rx",5).attr("ry",5).style("fill",(t=>t.color()))}static tick(t){t.attr("transform",(t=>t.transform()))}static setPosition(t,e){t.attr("transform",((t,r)=>(t.x=e[r].x,t.y=e[r].y,t.transform())))}static reset(){y.all=null}}const p=e=>class extends e{constructor(e,r,n,s,i){super(e,r,n,s,i),this.dispatch=t.dispatch("rendered")}static render(t,e){const r=super.render(t,e);return r.each((function(t){t.dispatch.rendered(this)})),r}on(t,e){this.dispatch.on(t,e)}},f=t=>{class e extends t{constructor(t,r,n,s,i){super(t,r,n,s,i);for(const o of e.pluginConstructors)o.bind(this)(t,r,n,s,i)}static registerConstructor(t){e.pluginConstructors.push(t)}}return e.pluginConstructors=[],e};class g extends(p(d)){}class y extends(f(g)){}class v{constructor(t,e,r,n){this.id=e,this.source=y.idByName(t.source),this.target=y.idByName(t.target),this.metaList=new l(t.meta).get(r),this.sourceMeta=new l(t.meta,"source").get(r),this.targetMeta=new l(t.meta,"target").get(r),this.extraClass=t.class||"",this.width="function"==typeof n?n(t.meta)||3:n||3,this.defaultMargin=15,this.labelXOffset=20,this.labelYOffset=1.5,this.color="#7a4e4e",this.register(e,this.source,this.target)}isNamedPath(){return this.metaList.length>0}isReversePath(){return this.targetMeta.length>0}d(){return`M ${this.source.x} ${this.source.y} L ${this.target.x} ${this.target.y}`}pathId(){return`path${this.id}`}linkId(){return`link${this.id}`}margin(){if(!this._margin){const t=window.getComputedStyle(document.getElementById(this.linkId())).margin;this._margin=t&&"0px"!==t?parseInt(t):this.defaultMargin}return this._margin}tspanXOffset(){return this.isNamedPath()?0:this.isReversePath()?-this.labelXOffset:this.labelXOffset}tspanYOffset(){return this.isNamedPath()?.7-this.labelYOffset+"em":`${this.labelYOffset}em`}rotate(t){return this.source.x>this.target.x?`rotate(180 ${t.x+t.width/2} ${t.y+t.height/2})`:"rotate(0)"}split(){if(!this.metaList&&!this.sourceMeta&&!this.targetMeta)return[this];const t=[];return["metaList","sourceMeta","targetMeta"].forEach(((e,r,n)=>{if(this[e]){const r=Object.assign(Object.create(this),this);n.filter((t=>t!==e)).forEach((t=>r[t]=[])),t.push(r)}})),t}hasMeta(){return this.metaList.length>0||this.sourceMeta.length>0||this.targetMeta.length>0}class(){return`link ${e(this.source.name)} ${e(this.target.name)} ${e(this.source.name)}-${e(this.target.name)} ${this.extraClass}`}static render(t,e,r){const n=t.selectAll(".link").data(r).enter().append("g").attr("class",(t=>t.class())),s=n.append("line").attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)).attr("stroke",(t=>t.color)).attr("stroke-width",(t=>t.width)).attr("id",(t=>t.linkId())).on("mouseover.line",(t=>o.selectAll(`text.${t.pathId()}`).classed("hover",!0))).on("mouseout.line",(t=>o.selectAll(`text.${t.pathId()}`).classed("hover",!1))),i=n.append("path").attr("d",(t=>t.d())).attr("id",(t=>t.pathId())),o=e.selectAll(".link").data(r).enter().append("g").attr("class",(t=>t.class())),a=o.selectAll("text").data((t=>t.split().filter((t=>t.hasMeta())))).enter().append("text").attr("class",(t=>t.pathId()));return a.append("textPath").attr("xlink:href",(t=>`#${t.pathId()}`)).each((function(t){_.appendTspans(this,t.metaList),_.appendTspans(this,t.sourceMeta),_.appendTspans(this,t.targetMeta),t.isNamedPath()&&_.center(this),t.isReversePath()&&_.theOtherEnd(this)})),_.zoom(),[s,i,a]}static theOtherEnd(e){t.select(e).attr("class","reverse").attr("text-anchor","end").attr("startOffset","100%")}static center(e){t.select(e).attr("class","center").attr("text-anchor","middle").attr("startOffset","50%")}static appendTspans(e,r){r.forEach((r=>{t.select(e).append("tspan").attr("x",(t=>t.tspanXOffset())).attr("dy",(t=>t.tspanYOffset())).attr("class",r.class).text(r.value)}))}static tick(t,e,r){t.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),e&&e.attr("d",(t=>t.d())),r&&r.attr("transform",(function(t){return t.rotate(this.getBBox())}))}static zoom(e){let r="hidden";e&&e>1.5&&(r="visible"),t.selectAll(".link text").style("visibility",r)}static setPosition(t,e){t.attr("x1",((t,r)=>e[r].x1)).attr("y1",((t,r)=>e[r].y1)).attr("x2",((t,r)=>e[r].x2)).attr("y2",((t,r)=>e[r].y2))}register(t,e,r){_.groups=_.groups||{};const n=[e,r].sort().toString();_.groups[n]=_.groups[n]||[],_.groups[n].push(t)}static shiftMultiplier(t){const e=_.groups[[t.source.id,t.target.id].sort().toString()]||[];return e.indexOf(t.id)-(e.length-1)/2}static shiftBundle(t,e,r){const n=t=>t.shiftBundle(_.shiftMultiplier(t));t.attr("transform",n),e.attr("transform",n),r.attr("transform",n)}shiftBundle(t){const e=this.margin()*t,r=Math.abs(this.target.x-this.source.x),n=Math.abs(this.source.y-this.target.y),s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));return`translate(${e*n/s}, ${e*r/s})`}static reset(){_.groups=null}}const m=e=>class extends e{constructor(e,r,n,s){super(e,r,n,s),this.dispatch=t.dispatch("rendered")}static render(t,e,r){const[n,s,i]=super.render(t,e,r);return n.each((function(t){t.dispatch.rendered(this)})),[n,s,i]}on(t,e){this.dispatch.on(t,e)}},b=t=>{class e extends t{constructor(t,r,n,s){super(t,r,n,s);for(const i of e.pluginConstructors)i.bind(this)(t,r,n,s)}static registerConstructor(t){e.pluginConstructors.push(t)}}return e.pluginConstructors=[],e};class x extends(m(v)){}class _ extends(b(x)){}const w=s(465),k=s(568);class ${constructor(t,e,r){this.data=t,this.pop=e,this.cachedMd5=r}static getAll(){return JSON.parse(localStorage.getItem("positionCache"))||{}}static get(){return this.getAll()[location.pathname]||{}}save(t,e,r){const n=$.getAll();n[location.pathname]={md5:this.md5(),group:this.groupPosition(t),node:this.nodePosition(e),link:this.linkPosition(r)},localStorage.setItem("positionCache",JSON.stringify(n))}md5(t,e){return(t=w(t||this.data)).pop=String(e||this.pop),"undefined"===t.pop&&(t.pop="null"),t.nodes&&t.nodes.forEach((t=>{delete t.icon,delete t.meta})),t.links&&t.links.forEach((t=>{delete t.meta})),k(JSON.stringify(t))}groupPosition(t){const e=[];return t.each((t=>{e.push({x:t.bounds.x,y:t.bounds.y,width:t.bounds.width(),height:t.bounds.height()})})),e}nodePosition(t){const e=[];return t.each((t=>{e.push({x:t.x,y:t.y})})),e}linkPosition(t){const e=[];return t.each((t=>{e.push({x1:t.source.x,y1:t.source.y,x2:t.target.x,y2:t.target.y})})),e}match(t,e){return this.cachedMd5===this.md5(t,e)}static load(t,e){const r=this.get();if(r){const n=new $(t,e,r.md5);if(n.match(t,e))return n.group=r.group,n.node=r.node,n.link=r.link,n}}}class j{constructor(t,e){this.node=t,this.eventType=e,this.offsetX=30,this.visibility="hidden"}tspanOffsetY(t){return t?"2em":"1.1em"}transform(){return`translate(${this.node.x}, ${this.node.y})`}class(){return`tooltip ${this.nodeId()}`}nodeId(t=!1){let r=e(this.node.name);return t&&(r=CSS.escape(r)),r}setVisibility(t){this.visibility="visible"===t?"visible":"hidden"}toggleVisibility(){return this.visibility="hidden"===this.visibility?"visible":"hidden",this.visibility}toggleVisibilityCallback(e){return()=>{t.event.defaultPrevented||t.select(e).attr("visibility",(function(t){return t.setVisibility(this.getAttribute("visibility")),t.toggleVisibility()}))}}configureNodeClickCallback(e){t.select(`#${this.nodeId(!0)}`).on("click.tooltip",this.toggleVisibilityCallback(e))}configureNodeHoverCallback(e){t.select(`#${this.nodeId(!0)}`).on("mouseenter.tooltip",this.toggleVisibilityCallback(e)),t.select(`#${this.nodeId(!0)}`).on("mouseleave.tooltip",this.toggleVisibilityCallback(e))}disableZoom(e){t.select(e).on("mousedown.tooltip",(()=>{t.event.stopPropagation()}))}static setHref(t){t&&(this.href=t)}static render(t,e){const r=t.selectAll(".tooltip").data(e).enter().append("g").attr("visibility",(t=>t.visibility)).attr("class",(t=>t.class())).attr("transform",(t=>t.transform()));return r.each((function(t){j.appendText(this),"hover"===t.eventType?t.configureNodeHoverCallback(this):t.configureNodeClickCallback(this),t.disableZoom(this)})),r}static fill(t){if(getComputedStyle(t).fill.match(/\(0,\s*0,\s*0\)/))return"#f8f1e9"}static pathD(t,e,r,n){return`M ${t},${e} L ${t+20},${e-10} ${t+20},${e-20}Q ${t+20},${e-20-8} ${t+20+8},${e-20-8}L ${t+20+r-8},${e-20-8}Q ${t+20+r},${e-20-8} ${t+20+r},${e-20}L ${t+20+r},${e-20+n}Q ${t+20+r},${e-20+n+8} ${t+20+r-8},${e-20+n+8}L ${t+20+8},${e-20+n+8}Q ${t+20},${e-20+n+8} ${t+20},${e-20+n}L ${t+20},${e+10} Z`}static appendText(e){const r=t.select(e).append("path"),n=t.select(e).append("text");n.append("tspan").attr("x",(t=>t.offsetX+40)).attr("class","name").text("node:");const s=n.append("tspan").attr("dx",10).attr("class","value");"function"==typeof this.href?s.append("a").attr("href",(t=>j.href(t))).text((t=>t.node.name)):s.text((t=>t.node.name)),n.each((function(t){j.appendTspans(n,t.node.metaList);const e=this.getBBox();r.attr("d",j.pathD(30,0,e.width+40,e.height+20)).style("fill",(function(){return j.fill(this)}))}))}static appendTspans(t,e){e.forEach(((e,r)=>{t.append("tspan").attr("x",(t=>t.offsetX+40)).attr("dy",(t=>t.tspanOffsetY(0===r))).attr("class","name").text(`${e.class}:`),t.append("tspan").attr("dx",10).attr("class","value").text(e.value)}))}static followNode(t){t.attr("transform",(t=>t.transform()))}}const O=s(529);class T{constructor(e,r,n){this.options=n||{},this.options.selector=e,this.options.urlOrData=r,this.options.groupPattern=n.pop,this.options.width=n.width||960,this.options.height=n.height||600,this.options.color=t.scale.category20(),this.options.initialTicks=n.initialTicks||0,this.options.maxTicks=n.ticks||1e3,this.options.positionCache=!("positionCache"in n)||n.positionCache,this.options.bundle="bundle"in n&&n.bundle,this.options.tooltip=n.tooltip,this.setDistance=this.linkDistance(n.distance||150),j.setHref(n.href)}init(...e){this.options.meta=e,this.cola=this.initCola(),this.svg=this.initSvg(),this.displayLoadMessage(),"object"==typeof this.options.urlOrData?setTimeout((()=>{this.render(this.options.urlOrData)})):t.json(this.url(),((t,e)=>{t&&(console.error(t),this.showMessage(`Failed to load "${this.url()}"`)),this.render(e)}))}initCola(){return O.d3adaptor().avoidOverlaps(!0).handleDisconnected(!1).size([this.options.width,this.options.height])}initSvg(){this.zoom=t.behavior.zoom();const e=t.select(this.options.selector).append("svg").attr("width",this.options.width).attr("height",this.options.height).append("g").call(this.zoom.on("zoom",(()=>this.zoomCallback(e)))).append("g");return e.append("rect").attr("width",10*this.options.width).attr("height",10*this.options.height).attr("transform",`translate(-${5*this.options.width}, -${5*this.options.height})`).style("opacity",0),e}render(t){try{const e=t.nodes?t.nodes.map(((t,e)=>new y(t,e,this.options.meta,this.options.color,void 0!==this.options.tooltip))):[],r=t.links?t.links.map(((t,e)=>new _(t,e,this.options.meta,this.getLinkWidth))):[],n=u.divide(e,this.options.groupPattern,this.options.color),s=e.map((t=>new j(t,this.options.tooltip)));this.cola.nodes(e).links(r).groups(n),this.setDistance(this.cola),this.cola.start(this.options.initialTicks,0,0,0);const i=this.svg.append("g").attr("id","groups"),o=this.svg.append("g").attr("id","links"),a=this.svg.append("g").attr("id","nodes"),c=this.svg.append("g").attr("id","link-labels"),h=this.svg.append("g").attr("id","tooltips"),[l,d,p]=_.render(o,c,r),f=u.render(i,n).call(this.cola.drag().on("dragstart",T.dragstartCallback).on("drag",(()=>{this.options.bundle&&_.shiftBundle(l,d,p)}))),g=y.render(a,e).call(this.cola.drag().on("dragstart",T.dragstartCallback).on("drag",(()=>{this.options.bundle&&_.shiftBundle(l,d,p),j.followNode(v)})));this.configureTick(f,g,l),this.positionCache=$.load(t,this.options.groupPattern),this.options.positionCache&&this.positionCache?(u.setPosition(f,this.positionCache.group),y.setPosition(g,this.positionCache.node),_.setPosition(l,this.positionCache.link)):(this.ticksForward(),this.positionCache=new $(t,this.options.groupPattern),this.savePosition(f,g,l)),this.hideLoadMessage(),this.configureTick(f,g,l,d,p),this.cola.start(),this.options.bundle&&_.shiftBundle(l,d,p),d.attr("d",(t=>t.d())),T.freeze(g);const v=j.render(h,s);"fixed"===this.options.positionCache&&this.cola.on("end",(()=>{this.savePosition(f,g,l)}))}catch(t){throw this.showMessage(t),t}}linkWidth(t){this.getLinkWidth=t}attr(e,r){this.initialTranslate||this.saveInitialTranslate(),this.svg.attr(e,r);const n=t.transform(this.svg.attr("transform"));this.zoom.scale(n.scale[0]),this.zoom.translate(n.translate)}destroy(){t.select("body svg").remove(),y.reset(),_.reset()}static freeze(t){t.each((t=>t.fixed=!0))}static dragstartCallback(){t.event.sourceEvent.stopPropagation()}linkDistance(t){return"function"==typeof t?t:e=>e.linkDistance(t)}url(){return this.uniqueUrl||(this.uniqueUrl=`${this.options.urlOrData}?${(new Date).getTime()}`),this.uniqueUrl}configureTick(t,e,r,n,s){this.cola.on("tick",(()=>{y.tick(e),_.tick(r,n,s),u.tick(t)}))}ticksForward(t){t=t||this.options.maxTicks;for(let e=0;e<t;e++)this.cola.tick()}zoomCallback(e){this.initialTranslate||this.saveInitialTranslate(),t.event.scale*=this.initialScale,t.event.translate[0]+=this.initialTranslate[0],t.event.translate[1]+=this.initialTranslate[1],_.zoom(t.event.scale),e.attr("transform",`translate(${t.event.translate}) scale(${t.event.scale})`)}displayLoadMessage(){this.indicator=this.svg.append("text").attr("x",this.options.width/2).attr("y",this.options.height/2).attr("dy",".35em").style("text-anchor","middle").text("Simulating. Just a moment ...")}hideLoadMessage(){this.indicator&&this.indicator.remove()}showMessage(t){this.indicator&&this.indicator.text(t)}saveInitialTranslate(){const e=t.transform(this.svg.attr("transform"));this.initialScale=e.scale[0],this.initialTranslate=e.translate}savePosition(t,e,r){this.positionCache.save(t,e,r)}}const C=e=>class extends e{constructor(e,r,n){super(e,r,n),this.dispatch=t.dispatch("rendered")}render(t){super.render(t),this.dispatch.rendered()}on(t,e){this.dispatch.on(t,e)}};class A extends((t=>class extends t{static plugin(t,e={}){t.load(u,y,_,e)}})(T)){}class S extends(C(A)){}})(),i})()}));
//# sourceMappingURL=inet-henge.min.js.map