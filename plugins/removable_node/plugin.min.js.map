{"version":3,"file":"plugin.min.js","mappings":"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","sources":["webpack://inet-henge/webpack/universalModuleDefinition","webpack://inet-henge/external umd \"d3\"","webpack://inet-henge/webpack/bootstrap","webpack://inet-henge/webpack/runtime/define property getters","webpack://inet-henge/webpack/runtime/hasOwnProperty shorthand","webpack://inet-henge/webpack/runtime/make namespace object","webpack://inet-henge/./src/meta_data.ts","webpack://inet-henge/./src/util.ts","webpack://inet-henge/./src/node.ts","webpack://inet-henge/./plugins/removable_node/src/plugin.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\")) : factory(root[\"d3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__990__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__990__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export type MetaDataType = { class: string; value: any }; // eslint-disable-line @typescript-eslint/no-explicit-any\n\nexport class MetaData {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(private data: Record<string, any>, private extraKey?: string) {}\n\n  get(keys: string[]) {\n    return this.slice(keys).filter((k) => typeof k.value === \"string\");\n  }\n\n  private slice(keys: string[]) {\n    if (!this.data) return [];\n\n    if (this.extraKey) return this.sliceWithExtraKey(keys);\n    else return this.sliceWithoutExtraKey(keys);\n  }\n\n  private sliceWithExtraKey(keys: string[]) {\n    const data: MetaDataType[] = [];\n\n    keys.forEach((k) => {\n      if (this.data[k] && this.data[k][this.extraKey]) data.push({ class: k, value: this.data[k][this.extraKey] });\n    });\n\n    return data;\n  }\n\n  private sliceWithoutExtraKey(keys: string[]) {\n    const data: MetaDataType[] = [];\n\n    keys.forEach((k) => {\n      if (this.data[k]) data.push({ class: k, value: this.data[k] });\n    });\n\n    return data;\n  }\n}\n","export function classify(string: string) {\n  return string.replace(\" \", \"-\").toLowerCase();\n}\n","import * as d3 from \"d3\";\n\nimport { Color } from \"./diagram\";\nimport { MetaData, MetaDataType } from \"./meta_data\";\nimport { NodePosition } from \"./position_cache\";\nimport { classify } from \"./util\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Constructor = (data: NodeDataType, id: number, options: NodeOptions) => void;\n\nexport type NodeDataType = {\n  name: string;\n  group: string[];\n  icon: string;\n  meta: Record<string, any>; // eslint-disable-line @typescript-eslint/no-explicit-any\n  class: string;\n};\n\nexport type NodeOptions = {\n  width: number;\n  height: number;\n  metaKeys: string[];\n  color: Color;\n  tooltip: boolean;\n};\n\nclass NodeBase {\n  private static all: Record<string, any>; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n  public name: string;\n  public group: string[];\n  public metaList: MetaDataType[];\n  public meta: Record<string, any>; // eslint-disable-line @typescript-eslint/no-explicit-any\n  public x: number;\n  public y: number;\n\n  private icon: string;\n  private extraClass: string;\n  private width: number;\n  private height: number;\n  private padding: number;\n  private tspanOffset: string;\n\n  constructor(data: NodeDataType, public id: number, private options: NodeOptions) {\n    this.name = data.name;\n    this.group = typeof data.group === \"string\" ? [data.group] : data.group || [];\n    this.icon = data.icon;\n    this.metaList = new MetaData(data.meta).get(options.metaKeys);\n    this.meta = data.meta;\n    this.extraClass = data.class || \"\";\n\n    this.width = options.width || 60;\n    this.height = options.height || 40;\n    this.padding = 3;\n    this.tspanOffset = \"1.1em\";\n\n    this.register(id);\n  }\n\n  private register(id: number) {\n    Node.all = Node.all || {};\n    Node.all[this.name] = id;\n  }\n\n  transform() {\n    const x = this.x - this.width / 2 + this.padding;\n    const y = this.y - this.height / 2 + this.padding;\n    return `translate(${x}, ${y})`;\n  }\n\n  private nodeWidth() {\n    return this.width - 2 * this.padding;\n  }\n\n  private nodeHeight() {\n    return this.height - 2 * this.padding;\n  }\n\n  private xForText() {\n    return this.width / 2;\n  }\n\n  private yForText() {\n    return this.height / 2;\n  }\n\n  static idByName(name: string) {\n    if (Node.all[name] === undefined) throw `Unknown node \"${name}\"`;\n    return Node.all[name];\n  }\n\n  public nodeId() {\n    return classify(this.name);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static render(layer: d3.Selection<any>, nodes: Node[]) {\n    const node: d3.Selection<Node> = layer\n      .selectAll(\".node\")\n      .data(nodes)\n      .enter()\n      .append(\"g\")\n      .attr(\"id\", (d) => d.nodeId())\n      .attr(\"name\", (d) => d.name)\n      .attr(\"transform\", (d) => d.transform());\n\n    node.each(function (this: SVGGElement, d) {\n      if (d.icon) Node.appendImage(this);\n      else Node.appendRect(this);\n\n      Node.appendText(this);\n    });\n\n    return node;\n  }\n\n  private static appendText(container: SVGGElement) {\n    const text = (d3.select(container) as d3.Selection<Node>)\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", (d) => d.xForText())\n      .attr(\"y\", (d) => d.yForText());\n    text\n      .append(\"tspan\")\n      .text((d) => d.name)\n      .attr(\"x\", (d) => d.xForText());\n\n    text.each((d) => {\n      // Show meta only when \"tooltip\" option is not configured\n      if (!d.options.tooltip) {\n        Node.appendMetaText(text, d.metaList);\n      }\n    });\n  }\n\n  private static appendMetaText(container: d3.Selection<Node>, meta: MetaDataType[]) {\n    meta.forEach((m) => {\n      container\n        .append(\"tspan\")\n        .attr(\"x\", (d) => d.xForText())\n        .attr(\"dy\", (d) => d.tspanOffset)\n        .attr(\"class\", m.class)\n        .text(m.value);\n    });\n  }\n\n  private static appendImage(container: SVGGElement) {\n    (d3.select(container) as d3.Selection<Node>)\n      .attr(\"class\", (d) => `node image ${classify(d.name)} ${d.extraClass}`)\n      .append(\"image\")\n      .attr(\"xlink:href\", (d) => d.icon)\n      .attr(\"width\", (d) => d.nodeWidth())\n      .attr(\"height\", (d) => d.nodeHeight());\n  }\n\n  private static appendRect(container: SVGGElement) {\n    (d3.select(container) as d3.Selection<Node>)\n      .attr(\"class\", (d) => `node rect ${classify(d.name)} ${d.extraClass}`)\n      .append(\"rect\")\n      .attr(\"width\", (d) => d.nodeWidth())\n      .attr(\"height\", (d) => d.nodeHeight())\n      .attr(\"rx\", 5)\n      .attr(\"ry\", 5)\n      .style(\"fill\", (d) => d.options.color(undefined));\n  }\n\n  static tick(node: d3.Selection<Node>) {\n    node.attr(\"transform\", (d) => d.transform());\n  }\n\n  static setPosition(node: d3.Selection<Node>, position: NodePosition[]) {\n    node.attr(\"transform\", (d, i) => {\n      if (\n        position[i]?.x !== null &&\n        position[i]?.x !== undefined &&\n        position[i]?.y !== null &&\n        position[i]?.y !== undefined\n      ) {\n        d.x = position[i].x;\n        d.y = position[i].y;\n      }\n      return d.transform();\n    });\n  }\n\n  static reset() {\n    Node.all = null;\n  }\n}\n\nconst Eventable = (Base: typeof NodeBase) => {\n  class EventableNode extends Base {\n    private dispatch: d3.Dispatch;\n\n    constructor(data: NodeDataType, id: number, options: NodeOptions) {\n      super(data, id, options);\n\n      this.dispatch = d3.dispatch(\"rendered\");\n    }\n\n    static render(layer, nodes) {\n      const node = super.render(layer, nodes);\n\n      node.each(function (this: SVGGElement, d: Node & EventableNode) {\n        d.dispatch.rendered(this);\n      });\n\n      return node;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    on(name: string, callback: (element: SVGGElement) => any) {\n      this.dispatch.on(name, callback);\n    }\n  }\n\n  return EventableNode;\n};\n\nconst Pluggable = (Base: typeof NodeBase) => {\n  class Node extends Base {\n    private static pluginConstructors: Constructor[] = [];\n\n    constructor(data: NodeDataType, id: number, options: NodeOptions) {\n      super(data, id, options);\n\n      for (const constructor of Node.pluginConstructors) {\n        // Call Pluggable at last as constructor may call methods defined in other classes\n        constructor.bind(this)(data, id, options);\n      }\n    }\n\n    static registerConstructor(func: Constructor) {\n      Node.pluginConstructors.push(func);\n    }\n  }\n\n  return Node;\n};\n\nclass EventableNode extends Eventable(NodeBase) {}\n\n// Call Pluggable at last as constructor may call methods defined in other classes\nclass Node extends Pluggable(EventableNode) {}\n\nexport { Node };\n","import * as d3 from \"d3\";\n\nimport { Constructor as NodeConstructor, Node, NodeDataType, NodeOptions } from \"../../../src/node\";\nimport { PluginClass } from \"../../../src/plugin\";\nimport { classify } from \"../../../src/util\";\n\ntype Options = {\n  showKey?: string;\n  hideKey?: string;\n};\n\nclass RemovableNode extends Node {\n  public selected;\n\n  public toggleSelected() {\n    this.selected = !this.selected;\n  }\n\n  public reset() {\n    this.selected = false;\n  }\n\n  public textColor() {\n    return this.selected ? \"red\" : \"black\";\n  }\n}\n\nexport const RemovableNodePlugin: PluginClass = class RemovableNodePlugin {\n  private static showKey = \"Escape\";\n  private static hideKey = \"d\";\n\n  static load(Group, Node, Link, options: Options = {}) {\n    if (options.showKey) {\n      RemovableNodePlugin.showKey = options.showKey;\n    }\n    if (options.hideKey) {\n      RemovableNodePlugin.hideKey = options.hideKey;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Node.registerConstructor(function (data: NodeDataType, id: number, options: NodeOptions) {\n      this.selected = false;\n\n      this.on(\"rendered\", (element: SVGGElement) => {\n        RemovableNodePlugin.configureRemovableNode(element);\n      });\n    } as NodeConstructor);\n\n    RemovableNodePlugin.configureRemovableNodes();\n\n    // Copy methods\n    Node.prototype.toggleSelected = RemovableNode.prototype.toggleSelected;\n    Node.prototype.reset = RemovableNode.prototype.reset;\n    Node.prototype.textColor = RemovableNode.prototype.textColor;\n  }\n\n  /**\n   * Configure keyboard event listener to show or hide Nodes and Links\n   */\n  private static configureRemovableNodes() {\n    d3.select(\"body\").on(\"keydown\", () => {\n      switch ((d3.event as KeyboardEvent).key) {\n        case RemovableNodePlugin.showKey:\n          RemovableNodePlugin.show();\n          break;\n        case RemovableNodePlugin.hideKey:\n          RemovableNodePlugin.hide();\n      }\n    });\n  }\n\n  /**\n   * Configure click event listener to select Nodes\n   */\n  private static configureRemovableNode(element: SVGGElement) {\n    const d3Element = d3.select(element);\n    d3Element.on(\"click.removableNode\", function (this: SVGGElement, d: RemovableNode) {\n      // Do nothing for dragging\n      if ((d3.event as MouseEvent).defaultPrevented) {\n        return;\n      }\n\n      d.toggleSelected();\n      RemovableNodePlugin.applyColor(this);\n    });\n  }\n\n  private static applyColor(element: SVGGElement) {\n    d3.select(element)\n      .select(\"text tspan\")\n      .style(\"fill\", (d: RemovableNode) => d.textColor());\n  }\n\n  private static show() {\n    d3.selectAll(\".node\")\n      .style(\"display\", \"inline\")\n      .each(function (this: SVGGElement, d: RemovableNode) {\n        d.reset();\n        RemovableNodePlugin.applyColor(this);\n      });\n\n    RemovableNodePlugin.showLinks();\n  }\n\n  private static hide() {\n    d3.selectAll(\".node\").style(\"display\", (d: RemovableNode) => {\n      if (d.selected) {\n        // Hide connected elements\n        RemovableNodePlugin.hideLinks(d.name);\n        RemovableNodePlugin.hideToolTips(d.name);\n        return \"none\";\n      }\n\n      return \"inline\";\n    });\n  }\n\n  private static showLinks() {\n    d3.selectAll(`.link`).style(\"display\", \"inline\");\n  }\n\n  private static hideLinks(nodeName: string) {\n    d3.selectAll(`.link.${classify(nodeName)}`).style(\"display\", \"none\");\n  }\n\n  private static hideToolTips(nodeName: string) {\n    d3.selectAll(`.tooltip.${classify(nodeName)}`).attr(\"visibility\", \"hidden\");\n  }\n};\n\nexport default RemovableNodePlugin;\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__990__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","MetaData","constructor","data","extraKey","keys","this","slice","filter","k","sliceWithExtraKey","sliceWithoutExtraKey","forEach","push","class","classify","string","replace","toLowerCase","NodeBase","id","options","name","group","icon","metaList","meta","metaKeys","extraClass","width","height","padding","tspanOffset","register","Node","all","transform","x","y","nodeWidth","nodeHeight","xForText","yForText","static","nodeId","layer","nodes","node","selectAll","enter","append","attr","each","appendImage","appendRect","appendText","container","text","tooltip","appendMetaText","m","style","color","position","Eventable","Base","super","dispatch","render","rendered","on","callback","Pluggable","pluginConstructors","bind","func","EventableNode","RemovableNode","toggleSelected","selected","reset","textColor","RemovableNodePlugin","Group","Link","showKey","hideKey","registerConstructor","element","configureRemovableNode","configureRemovableNodes","show","hide","applyColor","select","showLinks","hideLinks","hideToolTips","nodeName"],"sourceRoot":""}